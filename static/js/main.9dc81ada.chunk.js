(this["webpackJsonpcandy-machine-mint"]=this["webpackJsonpcandy-machine-mint"]||[]).push([[0],{133:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return g}));var r=n(1),a=n.n(r),c=n(4),o=n(32),i=n(65),s=new o.d.PublicKey("cndyAnrLdpjq1Ssp1z8xxDsB8dxe7u4HL5Nxi2K5WXZ"),u=new o.d.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),l=new o.d.PublicKey("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"),b=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r){var o,i,s,u,l,b=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=b.length>3&&void 0!==b[3]?b[3]:"recent",i=b.length>4&&void 0!==b[4]&&b[4],s=!1,u={slot:0,confirmations:0,err:null},l=0,e.next=7,new Promise(function(){var e=Object(c.a)(a.a.mark((function e(b,d){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){s||(s=!0,console.log("Rejecting for timeout..."),d({timeout:!0}))}),n);try{l=r.onSignature(t,(function(e,t){s=!0,u={err:e.err,slot:t.slot,confirmations:0},e.err?(console.log("Rejected via websocket",e.err),d(u)):(console.log("Resolved via websocket",e),b(u))}),o)}catch(f){s=!0,console.error("WS error in setup",t,f)}case 2:if(s||!i){e.next=8;break}return Object(c.a)(a.a.mark((function e(){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getSignatureStatuses([t]);case 3:n=e.sent,u=n&&n.value[0],s||(u?u.err?(console.log("REST error for",t,u),s=!0,d(u.err)):u.confirmations?(console.log("REST confirmation for",t,u),s=!0,b(u)):console.log("REST no confirmations for",t,u):console.log("REST null result for",t,u)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),s||console.log("REST connection error: txid",t,e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))(),e.next=6,x(2e3);case 6:e.next=2;break;case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return u=e.sent,r._signatureSubscriptions[l]&&r.removeSignatureListener(l),s=!0,console.log("Returning status",u),e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),d=function(t,n,r,a){var c=[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:o.d.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:i.b,isSigner:!1,isWritable:!1},{pubkey:o.d.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new o.d.TransactionInstruction({keys:c,programId:u,data:e.from([])})},f=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r){var c,i,u,l,b,d,f,p,m;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new o.b(r,t,{preflightCommitment:"recent"}),e.next=3,o.a.fetchIdl(s,c);case 3:return i=e.sent,u=new o.a(i,s,c),l={id:n,connection:r,program:u},e.next=8,u.account.candyMachine.fetch(n);case 8:return b=e.sent,d=b.data.itemsAvailable.toNumber(),f=b.itemsRedeemed.toNumber(),p=d-f,m=b.data.goLiveDate.toNumber(),m=new Date(1e3*m),console.log({itemsAvailable:d,itemsRedeemed:f,itemsRemaining:p,goLiveDate:m}),e.abrupt("return",{candyMachine:l,itemsAvailable:d,itemsRedeemed:f,itemsRemaining:p,goLiveDate:m});case 16:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),p=function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.d.PublicKey.findProgramAddress([e.from("metadata"),l.toBuffer(),n.toBuffer(),e.from("edition")],l);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.d.PublicKey.findProgramAddress([e.from("metadata"),l.toBuffer(),n.toBuffer()],l);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=function(){var e=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.d.PublicKey.findProgramAddress([t.toBuffer(),i.b.toBuffer(),n.toBuffer()],u);case 2:return e.abrupt("return",e.sent[0]);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r,c){var s,u,b,f,h,g,x;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=o.d.Keypair.generate(),e.next=3,j(r,s.publicKey);case 3:return u=e.sent,b=t.connection,f=t.program,e.next=7,m(s.publicKey);case 7:return h=e.sent,e.next=10,p(s.publicKey);case 10:return g=e.sent,e.next=13,b.getMinimumBalanceForRentExemption(i.a.span);case 13:return x=e.sent,e.next=16,f.rpc.mintNft({accounts:{config:n,candyMachine:t.id,payer:r,wallet:c,mint:s.publicKey,metadata:h,masterEdition:g,mintAuthority:r,updateAuthority:r,tokenMetadataProgram:l,tokenProgram:i.b,systemProgram:o.d.SystemProgram.programId,rent:o.d.SYSVAR_RENT_PUBKEY,clock:o.d.SYSVAR_CLOCK_PUBKEY},signers:[s],instructions:[o.d.SystemProgram.createAccount({fromPubkey:r,newAccountPubkey:s.publicKey,space:i.a.span,lamports:x,programId:i.b}),i.c.createInitMintInstruction(i.b,s.publicKey,0,r,r),d(u,r,r,s.publicKey),i.c.createMintToInstruction(i.b,s.publicKey,u,r,[],1)]});case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return"".concat(e.slice(0,t),"...").concat(e.slice(-t))},x=function(e){return new Promise((function(t){return setTimeout(t,e)}))}}).call(this,n(7).Buffer)},354:function(e,t,n){},355:function(e,t,n){},358:function(e,t){},360:function(e,t){},376:function(e,t){},377:function(e,t){},408:function(e,t){},464:function(e,t){},466:function(e,t){},480:function(e,t){},484:function(e,t){},486:function(e,t){},496:function(e,t){},498:function(e,t){},525:function(e,t){},527:function(e,t){},532:function(e,t){},534:function(e,t){},540:function(e,t){},542:function(e,t){},554:function(e,t){},557:function(e,t){},569:function(e,t){},570:function(e,t,n){"use strict";n.r(t);var r,a,c,o,i=n(2),s=n.n(i),u=n(29),l=n.n(u),b=(n(354),n(355),n(12)),d=n(1),f=n.n(d),p=n(4),m=n(14),j=n(132),h=n(134),g=n(314),x=n(598),O=n(604),y=n(608),v=n(607),w=n(600),k=n(603),S=n(15),P=n(52),T=n(176),L=n(133),M=n.p+"static/media/bugs.5026449c.gif",R=n(25),B=Object(h.a)(T.a)(r||(r=Object(j.a)([""]))),K=h.a.span(a||(a=Object(j.a)([""]))),A=h.a.div(c||(c=Object(j.a)(["\n  text-align : center;\n"]))),I=Object(h.a)(x.a)(o||(o=Object(j.a)(["\n  background: #f2072b; \n  color: #ffffff\n"]))),C=function(e){return Object(R.jsx)(k.a,{container:!0,justifyContent:"center",children:Object(R.jsx)("div",{className:"faq",children:Object(R.jsxs)(w.a,{style:{padding:8,backgroundColor:"#C0C0C0",color:"#3c660b",width:"400px",justifyContent:"center"},elevation:3,children:[Object(R.jsx)("strong",{children:e.question}),Object(R.jsx)("br",{}),e.text]})})})},W=function(e){var t=e.days,n=e.hours,r=e.minutes,a=e.seconds;e.completed;return Object(R.jsxs)(K,{children:[n+24*(t||0)," hours, ",r," minutes, ",a," seconds"]})},D=function(e){var t=Object(i.useState)(),n=Object(m.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(!1),o=Object(m.a)(c,2),s=o[0],u=o[1],l=Object(i.useState)(!1),d=Object(m.a)(l,2),j=d[0],h=d[1],x=Object(i.useState)(!1),w=Object(m.a)(x,2),k=w[0],T=w[1],K=Object(i.useState)(0),D=Object(m.a)(K,2),E=D[0],N=D[1],q=Object(i.useState)(0),F=Object(m.a)(q,2),U=F[0],Y=F[1],_=Object(i.useState)(0),H=Object(m.a)(_,2),J=H[0],V=H[1],z=Object(i.useState)({open:!1,message:"",severity:void 0}),G=Object(m.a)(z,2),X=G[0],Q=G[1],Z=Object(i.useState)(new Date(e.startDate)),$=Object(m.a)(Z,2),ee=$[0],te=$[1],ne=Object(P.c)(),re=Object(i.useState)(),ae=Object(m.a)(re,2),ce=ae[0],oe=ae[1],ie=function(){Object(p.a)(f.a.mark((function t(){var n,r,a,c,o,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ne){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Object(L.b)(ne,e.candyMachineId,e.connection);case 4:n=t.sent,r=n.candyMachine,a=n.goLiveDate,c=n.itemsAvailable,o=n.itemsRemaining,i=n.itemsRedeemed,N(c),V(o),Y(i),h(0===o),te(a),oe(r);case 16:case"end":return t.stop()}}),t)})))()},se=function(){var t=Object(p.a)(f.a.mark((function t(){var n,r,c,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,T(!0),!ne||!(null===ce||void 0===ce?void 0:ce.program)){t.next=10;break}return t.next=5,Object(L.c)(ce,e.config,ne.publicKey,e.treasury);case 5:return n=t.sent,t.next=8,Object(L.a)(n,e.txTimeout,e.connection,"singleGossip",!1);case 8:(null===(r=t.sent)||void 0===r?void 0:r.err)?Q({open:!0,message:"Mint failed! Please try again!",severity:"error"}):Q({open:!0,message:"Congratulations! Mint succeeded!",severity:"success"});case 10:t.next=17;break;case 12:t.prev=12,t.t0=t.catch(0),c=t.t0.msg||"Minting failed! Please try again!",t.t0.msg?311===t.t0.code?(c="SOLD OUT!",h(!0)):312===t.t0.code&&(c="Minting period hasn't started yet."):t.t0.message.indexOf("0x138")||(t.t0.message.indexOf("0x137")?c="SOLD OUT!":t.t0.message.indexOf("0x135")&&(c="Insufficient funds to mint. Please fund your wallet.")),Q({open:!0,message:c,severity:"error"});case 17:if(t.prev=17,!ne){t.next=23;break}return t.next=21,e.connection.getBalance(ne.publicKey);case 21:o=t.sent,a(o/S.LAMPORTS_PER_SOL);case 23:return T(!1),ie(),t.finish(17);case 26:case"end":return t.stop()}}),t,null,[[0,12,17,26]])})));return function(){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){Object(p.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!ne){t.next=5;break}return t.next=3,e.connection.getBalance(ne.publicKey);case 3:n=t.sent,a(n/S.LAMPORTS_PER_SOL);case 5:case"end":return t.stop()}}),t)})))()}),[ne,e.connection]),Object(i.useEffect)(ie,[ne,e.candyMachineId,e.connection]),Object(R.jsxs)("main",{children:[Object(R.jsx)("p",{className:"heading",children:"Loquacious Ladybugs"}),Object(R.jsx)("p",{children:Object(R.jsx)("img",{alt:"bugs",src:M,height:"250",width:"250"})}),ne&&Object(R.jsxs)("p",{children:["Wallet ",Object(L.d)(ne.publicKey.toBase58()||"")]}),ne&&Object(R.jsxs)("p",{children:["Balance: ",(r||0).toLocaleString()," SOL"]}),ne&&Object(R.jsxs)("p",{children:["Total Available: ",E]}),ne&&Object(R.jsxs)("p",{children:["Redeemed: ",U]}),ne&&Object(R.jsxs)("p",{children:["Remaining: ",J]}),Object(R.jsx)(A,{children:ne?Object(R.jsx)(I,{disabled:j||k||!s,onClick:se,variant:"contained",children:j?"SOLD OUT":s?k?Object(R.jsx)(O.a,{}):"MINT":Object(R.jsx)(g.a,{date:ee,onMount:function(e){return e.completed&&u(!0)},onComplete:function(){return u(!0)},renderer:W})}):Object(R.jsx)(B,{children:"Connect Wallet"})}),Object(R.jsx)("p",{className:"heading",children:"FAQ"}),Object(R.jsx)(C,{question:"How do I buy these one-of-a-kind ladybugs?",text:"These ladybugs are NFTs on the Solana blockchain. You can mint one by connecting your Solana wallet, supplied with some SOL."}),Object(R.jsx)(C,{question:"Which wallet should I use?",text:"The Phantom extension for Chrome, Firefox, Brave, or Edge"}),Object(R.jsx)(C,{question:"What is the cost to mint one ladybug?",text:"0.1 SOL"}),Object(R.jsx)(C,{question:"Where are the Discord and Twitter buttons?",text:"This is a family project focused on fun and learning. We are skipping the part where we drum up hype. That said, you can still mint one of these ladybugs and should be able to list them on secondary markets that take Solana NFTs with Metaplex style metata like Digitaleyes.market. The already minted ladybugs are verifeyed there, and I would be happy to update the mint list if more are minted. Also, you can use them in gaming experiences, like Portals, that allow you to show off your NFT collection."}),Object(R.jsx)(C,{question:"Can I make my own project like this?",text:"Yes! It's fun to play with new technology and see what you can do with it. I mostly followed the advice at https://hackmd.io/@levicook/HJcDneEWF. You will need some troubleshooting skills for when things go wrong and a bit of web hosting knowledge, but I believe you can do it!"}),Object(R.jsx)(y.a,{open:X.open,autoHideDuration:6e3,onClose:function(){return Q(Object(b.a)(Object(b.a)({},X),{},{open:!1}))},children:Object(R.jsx)(v.a,{onClose:function(){return Q(Object(b.a)(Object(b.a)({},X),{},{open:!1}))},severity:X.severity,children:X.message})})]})},E=n(32),N=n(116),q=n(341),F=n(605),U=new E.d.PublicKey("5snJe6tLSDyPa63o6NMSB3yz6aAPSTLmu98oL87VfWuq"),Y=new E.d.PublicKey("4Md6eMit8HYBxXLoV8U1xGLwWkW3yFHv7gTqJMbkLDfg"),_=new E.d.PublicKey("CgKevtoMaBUqXJrbmXcgmW9UDMavHBpN3RtJeB1uHUz1"),H="mainnet-beta",J=new E.d.Connection("https://solana-api.projectserum.com"),V=parseInt("1604102400",10),z=Object(q.a)({palette:{type:"dark"},overrides:{MuiButtonBase:{root:{justifyContent:"flex-start"}},MuiButton:{root:{textTransform:void 0,padding:"12px 16px"},startIcon:{marginRight:8},endIcon:{marginLeft:8}}}}),G=function(){var e=Object(i.useMemo)((function(){return Object(S.clusterApiUrl)(H)}),[]),t=Object(i.useMemo)((function(){return[Object(N.a)(),Object(N.b)(),Object(N.c)(),Object(N.e)({network:H}),Object(N.d)({network:H})]}),[]);return Object(R.jsx)(F.a,{theme:z,children:Object(R.jsx)(P.a,{endpoint:e,children:Object(R.jsx)(P.b,{wallets:t,autoConnect:!0,children:Object(R.jsx)(T.b,{children:Object(R.jsx)(D,{candyMachineId:_,config:Y,connection:J,startDate:V,treasury:U,txTimeout:3e4})})})})})},X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,609)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};l.a.render(Object(R.jsx)(s.a.StrictMode,{children:Object(R.jsx)(G,{})}),document.getElementById("root")),X()}},[[570,1,2]]]);
//# sourceMappingURL=main.9dc81ada.chunk.js.map
